<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCL Voghera - Circolo Giovanni XXIII</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="root">
        <div class="container">
            <!-- Header -->
            <header class="header">
                <div class="logo">
                    <div class="logo-circle">
                        <i class="fas fa-cross"></i>
                    </div>
                </div>
                <div class="header-text">
                    <h1>MCL VOGHERA</h1>
                    <span>Circolo Giovanni XXIII</span>
                </div>
            </header>

            <!-- Navigation -->
            <nav class="navigation">
                <ul>
                    <li><a href="#" @click.prevent="showPage('Home')" :class="{ active: currentPage === 'Home' }">Home</a></li>
                    <li><a href="#" @click.prevent="showPage('Prezzi')" :class="{ active: currentPage === 'Prezzi' }">Prezzi</a></li>
                    <li><a href="#" @click.prevent="showPage('Contatti')" :class="{ active: currentPage === 'Contatti' }">Contatti</a></li>
                    <li><a href="#" @click.prevent="showPage('Bacheca')" :class="{ active: currentPage === 'Bacheca' }">Bacheca</a></li>
                    <li><a href="#" @click.prevent="showPage('Orari')" :class="{ active: currentPage === 'Orari' }">Orari</a></li>
                    <li><a href="#" @click.prevent="showPage('Servizi')" :class="{ active: currentPage === 'Servizi' }">Servizi</a></li>
                </ul>
            </nav>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Home Page -->
                <div v-if="currentPage === 'Home'" class="page">
                    <h2>MCL VOGHERA</h2>
                    <div class="hero-image">
                        <div class="hero-placeholder">
                            <i class="fas fa-church"></i>
                        </div>
                    </div>
                    <div class="content-card">
                        <h3>Benvenuti al Circolo Giovanni XXIII</h3>
                        <p>
                            MCL Voghera | Piazza Duomo 70, 27058 Voghera (PV)<br><br>
                            Il Circolo MCL Giovanni XXIII di Voghera, parte attiva del Movimento Cristiano Lavoratori, 
                            opera da anni con sede in Piazza Duomo 70. È un punto di riferimento nel nostro territorio: 
                            offre spazi ricreativi, servizio bar, assistenza CAF e Patronato, attività culturali, 
                            turistico‑ricreative e occasioni di convivialità sociale per la comunità locale.<br><br>
                            La piattaforma che stai esplorando intende riflettere lo spirito accogliente del Circolo: 
                            qui potrai scoprire orari, eventi, servizi e restare aggiornato sulle attività rivolte ai soci. 
                            Un luogo virtuale che ambisce a promuovere solidarietà, cultura e partecipazione, 
                            in linea con i valori cristiani e sociali del MCL Voghera.
                        </p>
                    </div>
                </div>

                <!-- Prezzi Page -->
                <div v-if="currentPage === 'Prezzi'" class="page">
                    <h2>PREZZI</h2>
                    <div class="content-card">
                        <p>Qui puoi trovare tutte le informazioni sui prezzi.</p>
                        <div class="price-list">
                            <div class="price-item">
                                <span class="service">Tessera Annuale</span>
                                <span class="price">€ 15,00</span>
                            </div>
                            <div class="price-item">
                                <span class="service">Servizi CAF</span>
                                <span class="price">Su richiesta</span>
                            </div>
                            <div class="price-item">
                                <span class="service">Servizi Patronato</span>
                                <span class="price">Gratuito per soci</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contatti Page -->
                <div v-if="currentPage === 'Contatti'" class="page">
                    <h2>CONTATTI</h2>
                    <div class="content-card">
                        <div class="contact-grid">
                            <div class="contact-item">
                                <h5><i class="fas fa-globe"></i> Sito Web</h5>
                                <a href="https://www.mclvoghera.it" target="_blank" class="btn btn-primary">
                                    <i class="fas fa-external-link-alt"></i> Visita il sito web
                                </a>
                            </div>
                            <div class="contact-item">
                                <h5><i class="fas fa-phone"></i> Telefono</h5>
                                <a href="tel:038342980" class="btn btn-primary">
                                    <i class="fas fa-phone-volume"></i> 0383-42980
                                </a>
                            </div>
                            <div class="contact-item">
                                <h5><i class="fas fa-map-marker-alt"></i> Indirizzo</h5>
                                <p>Piazza Duomo 70, 27058 Voghera (PV)</p>
                                <a href="https://www.google.com/maps?q=Piazza+Duomo+70,+27058+Voghera+PV" target="_blank" class="btn btn-primary">
                                    <i class="fas fa-map"></i> Apri in Google Maps
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bacheca Page -->
                <div v-if="currentPage === 'Bacheca'" class="page">
                    <h2>BACHECA</h2>
                    
                    <!-- Admin Controls -->
                    <div class="admin-controls">
                        <div v-if="!isLoggedIn">
                            <button @click="showLoginForm = !showLoginForm" class="btn btn-admin">
                                <i class="fas fa-sign-in-alt"></i> Login Admin
                            </button>
                        </div>
                        <div v-if="isLoggedIn" class="admin-logged">
                            <span class="welcome-text">Benvenuto, {{ user.username }}!</span>
                            <button @click="showAddEventForm = !showAddEventForm" class="btn btn-success">
                                <i class="fas fa-plus"></i> Nuovo Evento
                            </button>
                            <button @click="logout()" class="btn btn-secondary">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>

                    <!-- Login Form -->
                    <div v-if="showLoginForm && !isLoggedIn" class="login-form">
                        <h4>Login Amministratore</h4>
                        <div v-if="loginMessage" :class="'alert ' + (loginMessage.includes('successo') ? 'alert-success' : 'alert-error')">
                            {{ loginMessage }}
                        </div>
                        <form @submit.prevent="login()">
                            <div class="form-group">
                                <label>Username:</label>
                                <input v-model="loginForm.username" type="text" required>
                            </div>
                            <div class="form-group">
                                <label>Password:</label>
                                <input v-model="loginForm.password" type="password" required>
                            </div>
                            <div class="form-buttons">
                                <button type="submit" class="btn btn-primary">Login</button>
                                <button type="button" @click="showLoginForm = false" class="btn btn-secondary">Annulla</button>
                            </div>
                        </form>
                    </div>

                    <!-- Add Event Form -->
                    <div v-if="showAddEventForm && isLoggedIn" class="event-form">
                        <h4>Aggiungi Nuovo Evento</h4>
                        <div v-if="eventMessage" :class="'alert ' + (eventMessage.includes('successo') ? 'alert-success' : 'alert-error')">
                            {{ eventMessage }}
                        </div>
                        <form @submit.prevent="addEvento()">
                            <div class="form-group">
                                <label>Titolo:</label>
                                <input v-model="addEventForm.titolo" type="text" required>
                            </div>
                            <div class="form-group">
                                <label>Descrizione:</label>
                                <textarea v-model="addEventForm.descrizione" required rows="4"></textarea>
                            </div>
                            <div class="form-group">
                                <label>Data Evento (opzionale):</label>
                                <input v-model="addEventForm.data_evento" type="date">
                            </div>
                            <div class="form-group">
                                <label>Prezzo (opzionale):</label>
                                <input v-model="addEventForm.prezzo" type="number" step="0.01" placeholder="0.00">
                            </div>
                            <div class="form-buttons">
                                <button type="submit" class="btn btn-success">Aggiungi Evento</button>
                                <button type="button" @click="showAddEventForm = false" class="btn btn-secondary">Annulla</button>
                            </div>
                        </form>
                    </div>

                    <!-- Events List -->
                    <div class="events-container">
                        <div v-for="evento in eventi" :key="evento.id" class="event-card">
                            <div v-if="isLoggedIn" class="event-actions">
                                <button @click="deleteEvento(evento.id)" class="btn btn-delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            <h4>{{ evento.titolo }}</h4>
                            <p>{{ evento.descrizione }}</p>
                            <div v-if="evento.data_evento || evento.prezzo" class="event-details">
                                <span v-if="evento.data_evento" class="event-date">
                                    <i class="fas fa-calendar"></i> {{ formatDate(evento.data_evento) }}
                                </span>
                                <span v-if="evento.prezzo" class="event-price">
                                    <i class="fas fa-euro-sign"></i> {{ formatPrice(evento.prezzo) }}
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-note">
                        <p>Gli eventi potrebbero subire variazioni che non dipendono da noi o dalla nostra organizzazione</p>
                    </div>
                </div>

                <!-- Orari Page -->
                <div v-if="currentPage === 'Orari'" class="page">
                    <h2>ORARI</h2>
                    <p>Qui puoi trovare tutte le informazioni su orari e giorni di chiusura.</p>
                    <div class="content-card">
                        <div class="schedule-list">
                            <div v-for="orario in orari" :key="orario.id" class="schedule-item">
                                <span class="day">{{ orario.giorno }}</span>
                                <span class="hours">{{ orario.Mattino + '  ' + orario.pomeriggio }}</span>
                            </div>
                        </div>
                        <div class="info-note">
                            <p>Gli orari potrebbero subire variazioni! In tal caso verranno comunicati su questa piattaforma</p>
                        </div>
                    </div>
                </div>

                <!-- Servizi Page -->
                <div v-if="currentPage === 'Servizi'" class="page">
                    <h2>SERVIZI</h2>
                    <div class="services-grid">
                        <div class="service-card">
                            <div class="service-icon">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <h5>Servizi CAF</h5>
                            <p>Assistenza fiscale e compilazione dichiarazioni per soci e cittadini.</p>
                        </div>
                        <div class="service-card">
                            <div class="service-icon">
                                <i class="fas fa-handshake"></i>
                            </div>
                            <h5>Patronato</h5>
                            <p>Supporto per pratiche previdenziali e assistenziali gratuite per i soci.</p>
                        </div>
                        <div class="service-card">
                            <div class="service-icon">
                                <i class="fas fa-coffee"></i>
                            </div>
                            <h5>Servizio Bar</h5>
                            <p>Punto di ritrovo per momenti di convivialità e socializzazione.</p>
                        </div>
                        <div class="service-card">
                            <div class="service-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h5>Attività Ricreative</h5>
                            <p>Organizzazione di eventi, gite e attività culturali per la comunità.</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="main.js"></script>
</body>
</html>